@using Clair.Common.RazorLib.Resizes.Displays
@using Clair.Common.RazorLib.TreeViews.Displays
@using Clair.TextEditor.RazorLib.TextEditors.Displays
@using Clair.Ide.RazorLib.CodeSearches.Models;

@{
	var codeSearchState = IdeService.GetCodeSearchState();
	var appOptionsState = IdeService.CommonService.GetAppOptionsState();
}

<div class="ci_ide_find-all">

    <div class="ci_ide_find-all-top-content"
         style="@codeSearchState.TopContentElementDimensions.GetStyleString(IdeService.TextEditorService.CommonService.UiStringBuilder)">
		
		@* <!-- Comment out currently unimplemented code -->
	        <div class="ci_ide_find-all-filter-list">
	            <div class="ci_ide_find-all-filter @GetIsActiveCssClass(CodeSearchFilterKind.Files)">
	                <IconFile /> files (f:)
	            </div>
	            <div class="ci_ide_find-all-filter @GetIsActiveCssClass(CodeSearchFilterKind.Types)">
	                <IconSymbolClass /> types (t:)
	            </div>
	            <div class="ci_ide_find-all-filter @GetIsActiveCssClass(CodeSearchFilterKind.Members)">
	                <IconSymbolMethod /> members (m:)
	            </div>
	        </div>
		*@

        @if (codeSearchState.StartingAbsolutePathForSearch is null)
        {
            <div>Set an active .NET Solution to choose a beginning path for the search.</div>
        }
        else
        {
            <div>Search beginning path: '@codeSearchState.StartingAbsolutePathForSearch'</div>
        }

        <input @bind="InputValue" />

        <div>@InputValue</div>

        <hr />

        <div>Results: @($"{codeSearchState.ResultList.Count:N0}")</div>
        
        <TreeViewContainerDisplay TreeViewContainerParameter="_treeViewContainerParameter"/>
    </div>

    <div class="ci_resize-row"
         style="@IdeService.CommonService.Options_ResizeHandleCssHeight"
         @onmousedown="() => SubscribeToDragEvent()">
    </div>
    
    <div class="ci_ide_find-all-bottom-content"
         style="@codeSearchState.BottomContentElementDimensions.GetStyleString(IdeService.CommonService.UiStringBuilder)">
         
         <TextEditorViewModelDisplay TextEditorViewModelKey="codeSearchState.PreviewViewModelKey"
                                     ViewModelDisplayOptions="_textEditorViewModelDisplayOptions" />
    </div>
</div>